{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["// src/main.ts\n\n// --- DOM ---\nconst inp = document.getElementById(\"inp\") as HTMLInputElement | null;\nconst add = document.getElementById(\"add\") as HTMLButtonElement | null;\nconst list = document.getElementById(\"list\") as HTMLUListElement | null;\n\nif (!inp || !add || !list) {\n    throw new Error(\"Missing #inp, #add or #list in HTML\");\n}\n\n// --- State ---\nlet counter: number = 0;\nlet map: Map<number, string> = new Map<number, string>([]);\n\n// --- Helpers ---\nfunction saveMap(m: Map<number, string>): void {\n    // \u043A\u043B\u044E\u0447\u0438 \u0432 localStorage \u0431\u0443\u0434\u0443\u0442 \u0441\u0442\u0440\u043E\u043A\u0430\u043C\u0438\n    const obj = Object.fromEntries(\n        Array.from(m.entries(), ([k, v]) => [String(k), v])\n    );\n    localStorage.setItem(\"map\", JSON.stringify(obj));\n}\n\n// --- Bootstrap ---\nwindow.addEventListener(\"load\", () => {\n    const b = localStorage.getItem(\"counter\");\n    if (b) {\n        const n = Number(b);\n        if (!Number.isNaN(n)) counter = n;\n    }\n\n    const raw = localStorage.getItem(\"map\");\n    if (raw) {\n        try {\n            const obj = JSON.parse(raw) as Record<string, unknown>;\n            if (obj && typeof obj === \"object\") {\n                // \u043A\u043E\u043D\u0432\u0435\u0440\u0442\u0438\u0440\u0443\u0435\u043C \u043A\u043B\u044E\u0447\u0438 \u043E\u0431\u0440\u0430\u0442\u043D\u043E \u0432 \u0447\u0438\u0441\u043B\u0430, \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u2014 \u0432 \u0441\u0442\u0440\u043E\u043A\u0438\n                map = new Map<number, string>(\n                    Object.entries(obj).map(([k, v]) => [Number(k), String(v)])\n                );\n            }\n        } catch {\n            // \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C \u0431\u0438\u0442\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435\n        }\n    }\n\n    renderMap(map);\n});\n\n// --- Handlers ---\nadd.addEventListener(\"click\", () => {\n    const v = inp.value.trim();\n    if (!v) return;\n\n    map.set(counter, v);\n    saveMap(map);\n\n    counter += 1;\n    localStorage.setItem(\"counter\", String(counter));\n\n    renderMap(map);\n\n    inp.value = \"\";\n    inp.focus();\n});\n\n// --- Functions (\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u0438\u043C\u0435\u043D\u0430 \u0438 \u0441\u0438\u0433\u043D\u0430\u0442\u0443\u0440\u044B) ---\nfunction renderMap(m: Map<number, string>): void {\n    list!.innerHTML = \"\";\n    m.forEach((item, id) => {\n        list!.appendChild(createItem(id, item));\n    });\n}\n\nfunction createItem(id: number, text: string): HTMLLIElement {\n    const li = document.createElement(\"li\");\n    li.id = String(id);\n\n    const span = document.createElement(\"span\");\n    span.textContent = text;\n    span.className = \"text\";\n    span.addEventListener(\"click\", () => span.classList.toggle(\"done\"));\n\n    const del = document.createElement(\"button\");\n    del.textContent = \"x\";\n    del.className = \"del\";\n    del.addEventListener(\"click\", () => {\n        li.remove();\n        map.delete(id);\n        saveMap(map);\n    });\n\n    li.appendChild(span);\n    li.appendChild(del);\n    return li;\n}"],
  "mappings": "AAGA,IAAMA,EAAM,SAAS,eAAe,KAAK,EACnCC,EAAM,SAAS,eAAe,KAAK,EACnCC,EAAO,SAAS,eAAe,MAAM,EAE3C,GAAI,CAACF,GAAO,CAACC,GAAO,CAACC,EACjB,MAAM,IAAI,MAAM,qCAAqC,EAIzD,IAAIC,EAAkB,EAClBC,EAA2B,IAAI,IAAoB,CAAC,CAAC,EAGzD,SAASC,EAAQC,EAA8B,CAE3C,IAAMC,EAAM,OAAO,YACf,MAAM,KAAKD,EAAE,QAAQ,EAAG,CAAC,CAACE,EAAGC,CAAC,IAAM,CAAC,OAAOD,CAAC,EAAGC,CAAC,CAAC,CACtD,EACA,aAAa,QAAQ,MAAO,KAAK,UAAUF,CAAG,CAAC,CACnD,CAGA,OAAO,iBAAiB,OAAQ,IAAM,CAClC,IAAMG,EAAI,aAAa,QAAQ,SAAS,EACxC,GAAIA,EAAG,CACH,IAAMC,EAAI,OAAOD,CAAC,EACb,OAAO,MAAMC,CAAC,IAAGR,EAAUQ,EACpC,CAEA,IAAMC,EAAM,aAAa,QAAQ,KAAK,EACtC,GAAIA,EACA,GAAI,CACA,IAAML,EAAM,KAAK,MAAMK,CAAG,EACtBL,GAAO,OAAOA,GAAQ,WAEtBH,EAAM,IAAI,IACN,OAAO,QAAQG,CAAG,EAAE,IAAI,CAAC,CAACC,EAAGC,CAAC,IAAM,CAAC,OAAOD,CAAC,EAAG,OAAOC,CAAC,CAAC,CAAC,CAC9D,EAER,MAAQ,CAER,CAGJI,EAAUT,CAAG,CACjB,CAAC,EAGDH,EAAI,iBAAiB,QAAS,IAAM,CAChC,IAAMQ,EAAIT,EAAI,MAAM,KAAK,EACpBS,IAELL,EAAI,IAAID,EAASM,CAAC,EAClBJ,EAAQD,CAAG,EAEXD,GAAW,EACX,aAAa,QAAQ,UAAW,OAAOA,CAAO,CAAC,EAE/CU,EAAUT,CAAG,EAEbJ,EAAI,MAAQ,GACZA,EAAI,MAAM,EACd,CAAC,EAGD,SAASa,EAAUP,EAA8B,CAC7CJ,EAAM,UAAY,GAClBI,EAAE,QAAQ,CAACQ,EAAMC,IAAO,CACpBb,EAAM,YAAYc,EAAWD,EAAID,CAAI,CAAC,CAC1C,CAAC,CACL,CAEA,SAASE,EAAWD,EAAYE,EAA6B,CACzD,IAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,GAAK,OAAOH,CAAE,EAEjB,IAAMI,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,YAAcF,EACnBE,EAAK,UAAY,OACjBA,EAAK,iBAAiB,QAAS,IAAMA,EAAK,UAAU,OAAO,MAAM,CAAC,EAElE,IAAMC,EAAM,SAAS,cAAc,QAAQ,EAC3C,OAAAA,EAAI,YAAc,IAClBA,EAAI,UAAY,MAChBA,EAAI,iBAAiB,QAAS,IAAM,CAChCF,EAAG,OAAO,EACVd,EAAI,OAAOW,CAAE,EACbV,EAAQD,CAAG,CACf,CAAC,EAEDc,EAAG,YAAYC,CAAI,EACnBD,EAAG,YAAYE,CAAG,EACXF,CACX",
  "names": ["inp", "add", "list", "counter", "map", "saveMap", "m", "obj", "k", "v", "b", "n", "raw", "renderMap", "item", "id", "createItem", "text", "li", "span", "del"]
}
