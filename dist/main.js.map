{
  "version": 3,
  "sources": ["../src/storage.ts", "../src/main.ts"],
  "sourcesContent": ["export function serializeMap(m: Map<number, string>): string {\n  const obj = Object.fromEntries(\n    Array.from(m.entries(), ([k, v]) => [String(k), v])\n  );\n  return JSON.stringify(obj);\n}\n\nexport function deserializeMap(raw: string | null): Map<number, string> {\n  if (!raw) return new Map<number, string>();\n\n  try {\n    const obj = JSON.parse(raw) as Record<string, unknown>;\n    if (!obj || typeof obj !== \"object\") return new Map<number, string>();\n\n    return new Map<number, string>(\n      Object.entries(obj).map(([k, v]) => [Number(k), String(v)])\n    );\n  } catch {\n    return new Map<number, string>();\n  }\n}\n", "// src/main.ts\n\n// --- DOM ---\nconst inp = document.getElementById(\"inp\") as HTMLInputElement | null;\nconst add = document.getElementById(\"add\") as HTMLButtonElement | null;\nconst list = document.getElementById(\"list\") as HTMLUListElement | null;\n\nif (!inp || !add || !list) {\n    throw new Error(\"Missing #inp, #add or #list in HTML\");\n}\n\n// --- State ---\nlet counter: number = 0;\nlet map: Map<number, string> = new Map<number, string>([]);\n\nimport { deserializeMap, serializeMap } from \"./storage\";\n\n// --- Helpers ---\nfunction saveMap(m: Map<number, string>): void {\n    localStorage.setItem(\"map\", serializeMap(m));\n}\n\n// --- Bootstrap ---\nwindow.addEventListener(\"load\", () => {\n    const b = localStorage.getItem(\"counter\");\n    if (b) {\n        const n = Number(b);\n        if (!Number.isNaN(n)) counter = n;\n    }\n\n    map = deserializeMap(localStorage.getItem(\"map\"));\n\n    renderMap(map);\n});\n\n// --- Handlers ---\nadd.addEventListener(\"click\", () => {\n    const v = inp.value.trim();\n    if (!v) return;\n\n    map.set(counter, v);\n    saveMap(map);\n\n    counter += 1;\n    localStorage.setItem(\"counter\", String(counter));\n\n    renderMap(map);\n\n    inp.value = \"\";\n    inp.focus();\n});\n\n// --- Functions (\u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u0438\u043C\u0435\u043D\u0430 \u0438 \u0441\u0438\u0433\u043D\u0430\u0442\u0443\u0440\u044B) ---\nfunction renderMap(m: Map<number, string>): void {\n    list!.innerHTML = \"\";\n    m.forEach((item, id) => {\n        list!.appendChild(createItem(id, item));\n    });\n}\n\nfunction createItem(id: number, text: string): HTMLLIElement {\n    const li = document.createElement(\"li\");\n    li.id = String(id);\n\n    const span = document.createElement(\"span\");\n    span.textContent = text;\n    span.className = \"text\";\n    span.addEventListener(\"click\", () => span.classList.toggle(\"done\"));\n\n    const del = document.createElement(\"button\");\n    del.textContent = \"x\";\n    del.className = \"del\";\n    del.addEventListener(\"click\", () => {\n        li.remove();\n        map.delete(id);\n        saveMap(map);\n    });\n\n    li.appendChild(span);\n    li.appendChild(del);\n    return li;\n}\n"],
  "mappings": "AAAO,SAASA,EAAaC,EAAgC,CAC3D,IAAMC,EAAM,OAAO,YACjB,MAAM,KAAKD,EAAE,QAAQ,EAAG,CAAC,CAACE,EAAGC,CAAC,IAAM,CAAC,OAAOD,CAAC,EAAGC,CAAC,CAAC,CACpD,EACA,OAAO,KAAK,UAAUF,CAAG,CAC3B,CAEO,SAASG,EAAeC,EAAyC,CACtE,GAAI,CAACA,EAAK,OAAO,IAAI,IAErB,GAAI,CACF,IAAMJ,EAAM,KAAK,MAAMI,CAAG,EAC1B,MAAI,CAACJ,GAAO,OAAOA,GAAQ,SAAiB,IAAI,IAEzC,IAAI,IACT,OAAO,QAAQA,CAAG,EAAE,IAAI,CAAC,CAACC,EAAGC,CAAC,IAAM,CAAC,OAAOD,CAAC,EAAG,OAAOC,CAAC,CAAC,CAAC,CAC5D,CACF,MAAQ,CACN,OAAO,IAAI,GACb,CACF,CCjBA,IAAMG,EAAM,SAAS,eAAe,KAAK,EACnCC,EAAM,SAAS,eAAe,KAAK,EACnCC,EAAO,SAAS,eAAe,MAAM,EAE3C,GAAI,CAACF,GAAO,CAACC,GAAO,CAACC,EACjB,MAAM,IAAI,MAAM,qCAAqC,EAIzD,IAAIC,EAAkB,EAClBC,EAA2B,IAAI,IAAoB,CAAC,CAAC,EAKzD,SAASC,EAAQC,EAA8B,CAC3C,aAAa,QAAQ,MAAOC,EAAaD,CAAC,CAAC,CAC/C,CAGA,OAAO,iBAAiB,OAAQ,IAAM,CAClC,IAAME,EAAI,aAAa,QAAQ,SAAS,EACxC,GAAIA,EAAG,CACH,IAAMC,EAAI,OAAOD,CAAC,EACb,OAAO,MAAMC,CAAC,IAAGN,EAAUM,EACpC,CAEAL,EAAMM,EAAe,aAAa,QAAQ,KAAK,CAAC,EAEhDC,EAAUP,CAAG,CACjB,CAAC,EAGDH,EAAI,iBAAiB,QAAS,IAAM,CAChC,IAAMW,EAAIZ,EAAI,MAAM,KAAK,EACpBY,IAELR,EAAI,IAAID,EAASS,CAAC,EAClBP,EAAQD,CAAG,EAEXD,GAAW,EACX,aAAa,QAAQ,UAAW,OAAOA,CAAO,CAAC,EAE/CQ,EAAUP,CAAG,EAEbJ,EAAI,MAAQ,GACZA,EAAI,MAAM,EACd,CAAC,EAGD,SAASW,EAAUL,EAA8B,CAC7CJ,EAAM,UAAY,GAClBI,EAAE,QAAQ,CAACO,EAAMC,IAAO,CACpBZ,EAAM,YAAYa,EAAWD,EAAID,CAAI,CAAC,CAC1C,CAAC,CACL,CAEA,SAASE,EAAWD,EAAYE,EAA6B,CACzD,IAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,GAAK,OAAOH,CAAE,EAEjB,IAAMI,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,YAAcF,EACnBE,EAAK,UAAY,OACjBA,EAAK,iBAAiB,QAAS,IAAMA,EAAK,UAAU,OAAO,MAAM,CAAC,EAElE,IAAMC,EAAM,SAAS,cAAc,QAAQ,EAC3C,OAAAA,EAAI,YAAc,IAClBA,EAAI,UAAY,MAChBA,EAAI,iBAAiB,QAAS,IAAM,CAChCF,EAAG,OAAO,EACVb,EAAI,OAAOU,CAAE,EACbT,EAAQD,CAAG,CACf,CAAC,EAEDa,EAAG,YAAYC,CAAI,EACnBD,EAAG,YAAYE,CAAG,EACXF,CACX",
  "names": ["serializeMap", "m", "obj", "k", "v", "deserializeMap", "raw", "inp", "add", "list", "counter", "map", "saveMap", "m", "serializeMap", "b", "n", "deserializeMap", "renderMap", "v", "item", "id", "createItem", "text", "li", "span", "del"]
}
