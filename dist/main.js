function c(e){let t=Object.fromEntries(Array.from(e.entries(),([n,r])=>[String(n),r]));return JSON.stringify(t)}function m(e){if(!e)return new Map;try{let t=JSON.parse(e);return!t||typeof t!="object"?new Map:new Map(Object.entries(t).map(([n,r])=>[Number(n),String(r)]))}catch{return new Map}}var s=document.getElementById("inp"),u=document.getElementById("add"),l=document.getElementById("list");if(!s||!u||!l)throw new Error("Missing #inp, #add or #list in HTML");var o=0,i=new Map([]);function d(e){localStorage.setItem("map",c(e))}window.addEventListener("load",()=>{let e=localStorage.getItem("counter");if(e){let t=Number(e);Number.isNaN(t)||(o=t)}i=m(localStorage.getItem("map")),p(i)});u.addEventListener("click",()=>{let e=s.value.trim();e&&(i.set(o,e),d(i),o+=1,localStorage.setItem("counter",String(o)),p(i),s.value="",s.focus())});function p(e){l.innerHTML="",e.forEach((t,n)=>{l.appendChild(g(n,t))})}function g(e,t){let n=document.createElement("li");n.id=String(e);let r=document.createElement("span");r.textContent=t,r.className="text",r.addEventListener("click",()=>r.classList.toggle("done"));let a=document.createElement("button");return a.textContent="x",a.className="del",a.addEventListener("click",()=>{n.remove(),i.delete(e),d(i)}),n.appendChild(r),n.appendChild(a),n}
//# sourceMappingURL=main.js.map
